/*
==========================================================
THIS FILE WAS MADE BY DONNOVAN FROM BRAZIL
check BRPVP_lisence.txt FOR THE LISENCE

MORE INFORMATION:
http://www.brpvp.com
http://www.brpvp.com.br

DONNOVAN ON STEAM: 
https://steamcommunity.com/profiles/76561197975554637/
==========================================================
*/

BRPVP_specialItemsClassAd = [
	["BRP_kitLight",[5]],
	["BRP_kitCamuflagem",[5]],
	["BRP_kitAreia",[10]],
	["BRP_kitCidade",[5,10]],
	["BRP_kitStone",[5,10]],
	["BRP_kitCasebres",[5]],
	["BRP_kitConcreto",[25,50]],
	["BRP_kitPedras",[25,50]],
	["BRP_kitTorres",[5]],
	["BRP_kitEspecial",[2,4]],
	["BRP_kitTableChair",[5,10]], //10
	["BRP_kitBeach",[5]],
	["BRP_kitReligious",[5]],
	["BRP_kitStuffo1",[5,10]],
	["BRP_kitStuffo2",[5,10]],
	["BRP_kitLamp",[5,10]],
	["BRP_kitRecreation",[5]],
	["BRP_kitMilitarSign",[5]],
	["BRP_kitFuelStorage",[10,20]],
	["BRP_kitWrecks",[5]],
	["BRP_kitSmallHouse",[3,4,5]], //20
	["BRP_kitAverageHouse",[2,3,4]],
	["BRP_kitAntennaA",[1,2]],
	["BRP_kitAntennaB",[1,2]],
	["BRP_kitMovement",[20,40]],
	["BRP_kitRespawnA",[1,2,2]],
	["BRP_kitRespawnB",[1,2,2]],
	["BRP_kitHelipad",[2,4]],
	["BRP_kitAutoTurret",[5,10]],
	["BRP_kitFlags25",[1]],
	["BRP_kitFlags50",[1]], //30
	["BRP_kitFlags100",[1]],
	["BRP_kitFlags200",[1]],
	["BRP_kitBigHouse",[1,2,4]],
	["BRP_kitGiantHouse",[1,2,4]],
	["BRP_kitContainers",[2,4]],
	["BRP_boxThief",[5,10]],
	["BRP_vehicleThief",[5,10]],
	["BRP_doorThief",[5,10]],
	["BRP_kitTrees",[5,10]],
	["BRP_vodka",[5,10]], //40
	["BRP_hackTool",[2,4]],
	["BRP_identifier",[20,30]],
	["BRP_remoteControl",[5,10]],
	["BRP_zombieSpawn",[5,10]],
	["Mag_BRPVP_hydraulic_jack",[5,10]],
	["Mag_BRPVP_z_blood_bag",[10,20]],
	["Mag_BRPVP_scanner_100",[5,10]],
	["Mag_BRPVP_scanner_200",[5,10]],
	["Mag_BRPVP_scanner_300",[5,10]],
	["Mag_BRPVP_fuel_gallon",[5,10,15]], //50
	["Mag_BRPVP_veh_ownerity",[2,4]],

	["BRPVP_equip_axe",[50,100]],
	["BRPVP_equip_shovel",[50,100]],
	["BRPVP_equip_cutter",[50,100]],
	["BRPVP_equip_pickaxe",[50,100]],
	["BRPVP_farm_limestone",[25,50]],
	["BRPVP_farm_clay",[25,50]],
	["BRPVP_farm_coal",[25,50]],
	["BRPVP_farm_stone",[25,50]],
	["BRPVP_farm_iron",[25,50]], //60
	["BRPVP_farm_leaves",[25,50]],
	["BRPVP_farm_cotton",[25,50]],
	["BRPVP_farm_wood",[25,50]],
	["BRPVP_farm_latex",[25,50]],
	["BRPVP_farm_sand",[25,50]],
	["BRPVP_farm_metal_trash",[25,50]],
	["BRPVP_farm_eletronic_trash",[25,50]],

	["BRPVP_craft_cement",[10,20]],
	["BRPVP_craft_brick",[10,20]],
	["BRPVP_craft_circuits",[10,20]], //70
	["BRPVP_craft_steel_plate",[10]],
	["BRPVP_craft_steel_rebar",[10]],
	["BRPVP_craft_wooden_board",[10]],
	["BRPVP_craft_reinforced_concrete",[10]],
	["BRPVP_craft_fabric",[10]],
	["BRPVP_craft_wooden_wall",[10]],
	["BRPVP_craft_brick_wall",[10]],
	["BRPVP_craft_steel_wall",[10]],
	["BRPVP_craft_stone_x10",[10]],
	["BRPVP_craft_rubber",[10]], //80
	["BRPVP_craft_foundations",[5]],
	["BRPVP_craft_steel_structure",[5]],
	["BRPVP_material_seam_kit",[2]],
	["BRPVP_material_bolt_nail",[10,20]],

	["BRPVP_hulk_pills",[5,10]],
	["BRPVP_drone_finder",[5,10]],
	["BRP_kitGates",[5,10]],
	["BRPVP_baseBomb",[5,10,15]],
	["BRPVP_personalTracer",[5,10]],
	["BRPVP_houseGodMode",[2,3]], //90
	["BRPVP_antiBaseBomb",[5,5,10]],
	["BRPVP_turnInBandit",[2,4]],
	["BRPVP_baseTest",[1,2]],
	["BRPVP_noGrass",[5,10]],
	["BRP_kitSmallLights",[25,50]],
	["BRPVP_itemPaintVehicle",[2,4]],
	["BRPVP_itemPaintThinner",[5,10]],
	["BRPVP_itemClimb",[5,10]],

	["BRPVP_foodApple",[10,20]],
	["BRPVP_foodCanned",[10,20]], //100
	["BRPVP_foodBread",[10,20]],
	["BRPVP_foodWater",[10,20]],
	["BRPVP_foodCake",[10,20]],
	["BRPVP_foodEnergyDrink",[5,10]],

	["BRPVP_playerLaunch",[5,10]],
	["BRPVP_bagSoldier",[2,4]],
	["BRPVP_carrier",[]],
	["BRPVP_baseMine",[5,10]],
	["BRPVP_baseMineDefuse",[5,10]],
	["BRPVP_vehicleAmmo",[2,4,6]],  //110
	["BRP_kitBunkers",[5,10]],
	["BRP_kitAutoTurretLvl2",[5]],
	["BRPVP_turretUpgrade",[5,10]],
	["BRPVP_foodBurger",[5,10]],
	["BRPVP_xrayItem",[1,2]],
	["BRPVP_itemMagnet",[10,20]],
	["BRPVP_newsPaper",[10,20]],
	["BRPVP_uberPack",[5]],
	["BRPVP_bigFloor200",[0,0,0,1]],
	["BRPVP_bigFloorRemove",[0,0,1,1]],
	
	["BRPVP_atmFix",[1,2,3]],
	["BRPVP_boxeItem",[1,2,3]],
	["BRPVP_selfRevive",[1,1,1,2,2,3]],
	["BRPVP_bodyChange",[1,2,3]],
	["BRPVP_vehicleTorque",[5]],
	["BRPVP_possession",[1,2,3]],
	["BRPVP_possessionStrong",[1,2]],
	["BRPVP_possessionPlayer",[0,0,0,0,1]],
	
	["BRPVP_uberAttack",[5,5,5,5,10]],
	["BRPVP_trench",[5,5,5,10]],
	["BRPVP_baseBoxUpgrade",[2,2,3,3,4,5]]
];
BRPVP_specialItemsLocalize = [
    "str_mkt_cons0",
    "str_mkt_cons1",
    "str_mkt_cons2",
    "str_mkt_cons3",
    "str_mkt_cons4",
    "str_mkt_cons5",
    "str_mkt_cons6",
    "str_mkt_cons7",
    "str_mkt_cons8",
    "str_mkt_cons9",
    "str_mkt_cons10",
    "str_mkt_cons11",
    "str_mkt_cons12",
    "str_mkt_cons13",
    "str_mkt_cons14",
    "str_mkt_cons15",
    "str_mkt_cons16",
    "str_mkt_cons17",
    "str_mkt_cons18",
    "str_mkt_cons19",
    "str_mkt_cons20",
    "str_mkt_cons21",
    "str_mkt_cons22",
    "str_mkt_cons23",
    "str_mkt_cons24",
    "str_mkt_cons25",
    "str_mkt_cons26",
    "str_mkt_cons27",
    "str_mkt_cons28",
	"str_mkt_cons29",
	"str_mkt_cons30",
	"str_mkt_cons31",
	"str_mkt_cons32",
	"str_mkt_cons33",
	"str_mkt_cons34",
	"str_mkt_cons35",
	"str_thief_key_box",
	"str_thief_key_veh",
	"str_thief_key_door",
	"str_mkt_cons36",
	"str_mkt_vodka",
	"str_hack_tool",
	"str_identifier",
	"str_remote_control",
	"str_zombie_spawn",
	"str_brpvp_hydraulic_jack_displayname",
	"str_brpvp_z_blood_bag_displayname",
	"str_brpvp_scanner_100_displayname",
	"str_brpvp_scanner_200_displayname",
	"str_brpvp_scanner_300_displayname",
	"str_brpvp_fuel_gallon_displayname",
	"str_brpvp_veh_ownerity_displayname",
	
	"str_brpvp_equip_axe_displayname",
	"str_brpvp_equip_shovel_displayname",
	"str_brpvp_equip_cutter_displayname",
	"str_brpvp_equip_pickaxe_displayname",
	"str_brpvp_farm_limestone_displayname",
	"str_brpvp_farm_clay_displayname",
	"str_brpvp_farm_coal_displayname",
	"str_brpvp_farm_stone_displayname",
	"str_brpvp_farm_iron_displayname",
	"str_brpvp_farm_leaves_displayname",
	"str_brpvp_farm_cotton_displayname",
	"str_brpvp_farm_wood_displayname",
	"str_brpvp_farm_latex_displayname",
	"str_brpvp_farm_sand_displayname",
	"str_brpvp_farm_metal_trash_displayname",
	"str_brpvp_farm_eletronic_trash_displayname",

	"str_brpvp_craft_cement_displayname",
	"str_brpvp_craft_brick_displayname",
	"str_brpvp_craft_circuits_displayname",
	"str_brpvp_craft_steel_plate_displayname",
	"str_brpvp_craft_steel_rebar_displayname",
	"str_brpvp_craft_wooden_board_displayname",
	"str_brpvp_craft_reinforced_concrete_displayname",
	"str_brpvp_craft_fabric_displayname",
	"str_brpvp_craft_wooden_wall_displayname",
	"str_brpvp_craft_brick_wall_displayname",
	"str_brpvp_craft_steel_wall_displayname",
	"str_brpvp_craft_stone_x10_displayname",
	"str_brpvp_craft_rubber_displayname",
	"str_brpvp_craft_foundations_displayname",
	"str_brpvp_craft_steel_structure_displayname",
	"str_brpvp_material_seam_kit_displayname",
	"str_brpvp_material_bolt_nail_displayname",
	
	"str_brpvp_hulk_pills_displayname",
	"str_brpvp_drone_finder_displayname",
	"str_cons_gates",
	"str_name_base_bomb",
	"str_personal_tracer",
	"str_god_mode_house",
	"str_name_anti_base_bomb",
	"str_name_into_bandit",
	"str_base_test_item",
	"str_item_no_grass",
	"str_small_lights_kit",
	"str_item_paint_vehicle",
	"str_item_paint_thinner",
	"str_item_climb",
	
	"str_food_apple",
	"str_food_canned",
	"str_food_bread",
	"str_food_water",
	"str_food_cake",
	"str_food_energy_drink",
	
	"str_player_launch",
	"str_bag_soldier",
	"str_carrier_item",
	"str_base_mine",
	"str_base_mine_defuse",
	"str_rearm_vehicle_item_name",
	"str_kit_bunkers",
	"str_kit_turret_lvl2",
	"str_turret_upgrade_item",
	"str_food_burger",
	"str_xray_item_name",
	"str_item_magnet",
	"str_item_newspaper",
	"str_item_uber_pack",
	"str_item_big_floor_200",
	"str_item_big_floor_remove",

	"str_item_atm_fix",
	"str_item_boxe",
	"str_item_self_revive",
	"str_item_body_change",
	"str_alti_item_torque",
	"str_item_possession",
	"str_item_possession_strong",
	"str_item_possession_player",
	
	"str_item_uber_attack",
	"str_item_trench",
	"str_item_base_box_upgrade"
];
BRPVP_specialItemsGroupClassAd = [
    localize "str_spec_itm_group_cons",
	localize "str_spec_itm_group_thief",
	localize "str_spec_itm_group_food",
	localize "str_spec_itm_group_equip",
	localize "str_spec_itm_group_farm",
	localize "str_spec_itm_group_craft"
];
BRPVP_specialItemsGroupClassAdQtt = [
	[5,6],
	[5,6],
	[5,6,7],
	[5,6],
	[5,6,7],
	[5,6,7]
];
BRPVP_openItemAltIClassAdCreation = {
	params ["_ii","_qtt"];

	//DESCRIPTION
	private _descrA = "";
	private _descrB = "";
	private _cii = count _ii;
	{
		private _loc = BRPVP_specialItemsLocalize select _x;
		_descrA = _descrA+format ["%1%2 X %3.","%",_forEachIndex+1,_qtt select _forEachIndex];
		_descrB = _descrB+format ["localize '%1'",_loc];
		if (_forEachIndex+1 isNotEqualTo _cii) then {
			_descrA = _descrA+" ";
			_descrB = _descrB+",";
		};
	} forEach _ii;
	private _descr = format ["format ['%1',%2]",_descrA,_descrB];
	_descr = [[_descr,"""",""""""] call BRPVP_stringReplace,":","@#$2_points$#@"] call BRPVP_stringReplace;

	//PRICE
	private _price = 0;
	{
		private _class = _x;
		private _q = _qtt select _forEachIndex;
		if (_class isEqualType "" || {_class > -1}) then {
			_class = if (_class isEqualType 1) then {BRPVP_specialItems select _class} else {_class};
			_price = _price+(_class call BRPVP_itemGetPrice)*_q;
		};
	} forEach _ii;

	//CARGO
	private _cargo = [];
	{_cargo pushBack [_x,_qtt select _forEachIndex];} forEach _ii;

	//DATA
	private _params = [
		_cargo,
		"alt+i (auto)",
		_price,
		-1,
		"Billy Crema",
		BRPVP_xpToBuyAllPerks,
		"localize 'str_auto_classad_name'",
		_descr
	];

	//SAVE
	_params remoteExecCall ["BRPVP_addClassAdItem",2];
};
call BRPVP_classAdAltiRemoveAuto;
for "_i1" from 1 to selectRandom BRPVP_specialItemsKitsPerRestart do {
	private _ii = [];
	private _qtt = [];
	for "_i2" from 1 to selectRandom BRPVP_specialItemsKitSizeClassAd do {
		private _type = selectRandom BRPVP_specialItemsGroupClassAd;
		private _typeQtt = selectRandom (BRPVP_specialItemsGroupClassAdQtt select (BRPVP_specialItemsGroupClassAd find _type));
		private _specialItemsClassAd = [];
		{
			if (BRPVP_specialItemsGroup select _forEachIndex isEqualTo _type && !((_x select 0) in BRPVP_removeFromTrader) && _x select 1 isNotEqualTo []) then {
				_specialItemsClassAd pushBack [_x select 0,_x select 1,_forEachIndex];
			};
		} forEach BRPVP_specialItemsClassAd;
		if (_specialItemsClassAd isEqualTo []) then {_specialItemsClassAd = [["BRPVP_farm_stone",[1,2],59],["BRPVP_farm_sand",[1,2],65]];};
		for "_i3" from 1 to _typeQtt do {
			private _qi = 0;
			private _fei = -1;
			while {_qi isEqualTo 0} do {
				private _sr = selectRandom _specialItemsClassAd;
				private _qiArray = _sr select 1;
				_fei = _sr select 2;
				_qi = selectRandom _qiArray;
			};
			if (_qi isEqualTo 0) then {_qi = 1;};
			private _idx2 = _ii find _fei;
			if (_idx2 isEqualTo -1) then {
				_ii pushBack _fei;
				_qtt pushBack _qi;
			} else {
				_qtt set [_idx2,(_qtt select _idx2)+_qi];
			};
		};
	};
	[_ii,_qtt] call BRPVP_openItemAltIClassAdCreation;
};
BRPVP_addOneAltiItemsAutoClassAd = {
	private _ii = [];
	private _qtt = [];
	for "_i2" from 1 to selectRandom BRPVP_specialItemsKitSizeClassAd do {
		private _type = selectRandom BRPVP_specialItemsGroupClassAd;
		private _typeQtt = selectRandom (BRPVP_specialItemsGroupClassAdQtt select (BRPVP_specialItemsGroupClassAd find _type));
		private _specialItemsClassAd = [];
		{
			if (BRPVP_specialItemsGroup select _forEachIndex isEqualTo _type && _x select 1 isNotEqualTo []) then {
				_specialItemsClassAd pushBack [_x select 0,_x select 1,_forEachIndex];
			};
		} forEach BRPVP_specialItemsClassAd;
		for "_i3" from 1 to _typeQtt do {
			private _qi = 0;
			private _fei = -1;
			while {_qi isEqualTo 0} do {
				private _sr = selectRandom _specialItemsClassAd;
				private _qiArray = _sr select 1;
				_fei = _sr select 2;
				_qi = selectRandom _qiArray;
			};
			if (_qi isEqualTo 0) then {_qi = 1;};
			private _idx2 = _ii find _fei;
			if (_idx2 isEqualTo -1) then {
				_ii pushBack _fei;
				_qtt pushBack _qi;
			} else {
				_qtt set [_idx2,(_qtt select _idx2)+_qi];
			};
		};
	};
	[_ii,_qtt] call BRPVP_openItemAltIClassAdCreation;
};